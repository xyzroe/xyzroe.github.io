<!doctype html><html lang=en-us><head><title>ZigUSB / xyzroe's blog</title>
<link rel="shortcut icon" href=../../favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.121.1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="xyzroe"><meta name=description content><link rel=stylesheet href=//xyzroe.cc/css/main.min.e936c5013d179081bc7d200f84dcfe9c246ba63f93f7d53028d5ba8329bb286c.css><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-203059197-1","auto"),ga("send","pageview"))</script><meta name=twitter:card content="summary"><meta name=twitter:title content="ZigUSB"><meta name=twitter:description content="ZigUSB was developed as a device that allows you to control and monitor the power of a device connected via USB. Using this device, you can remotely control the power of the USB port to turn on or off the connected device. And also monitor the current voltage and current. And it's not a bad Zigbee network router. Frequent use cases: converting a &#34;stupid&#34; USB lamp into a &#34;smart&#34; one; connecting modems / sticks / adapters, which sometimes require a power reset; monitoring the current consumption of any connected device."><meta property="og:title" content="ZigUSB"><meta property="og:description" content="ZigUSB was developed as a device that allows you to control and monitor the power of a device connected via USB. Using this device, you can remotely control the power of the USB port to turn on or off the connected device. And also monitor the current voltage and current. And it's not a bad Zigbee network router. Frequent use cases: converting a &#34;stupid&#34; USB lamp into a &#34;smart&#34; one; connecting modems / sticks / adapters, which sometimes require a power reset; monitoring the current consumption of any connected device."><meta property="og:type" content="article"><meta property="og:url" content="//xyzroe.cc/posts/zigusb/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-29T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-29T00:00:00+00:00"><script src=https://unpkg.com/feather-icons></script><link rel=stylesheet href=../../css/google-translate.css><script src=https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js></script><script src=../../js/google-translate.js></script><link rel=stylesheet href=../../css/accordion.css></head><body><header class=app-header><div class=notranslate><a href=//xyzroe.cc/><img class=app-header-avatar src=../../img/avatar.png alt=xyzroe></a><h1></h1><nav class=app-header-menu><a class=app-header-menu-item href=../../>Home</a>
-
<a class=app-header-menu-item href=../../links/>Links</a>
-
<a class=app-header-menu-item href=../../about/>About</a>
-
<a class=app-header-menu-item href=../../tags/>Tags</a></nav><p>Technical automation, some DIY stuff, little useful scripts, electronic devices development</p><div class=app-header-social><a href=https://t.me/xyzroe target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-send"><title>Telergam</title><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></a><a href=mailto:xyzroe@mind.in.ua target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-at-sign"><title>Email</title><circle cx="12" cy="12" r="4"/><path d="M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94"/></svg></a><a href=https://github.com/xyzroe target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>Github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div><div class=app-footer><br><a rel="Made in Ukraine" target=_blank href=https://stand-with-ukraine.pp.ua><img alt="Made in Ukraine" style=border-width:0 src="https://img.shields.io/badge/made_in-ukraine-ffd700.svg?labelColor=0057b7"></a><br><br><a rel=license target=_blank href=http://creativecommons.org/licenses/by-sa/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png></a></div><div class=app-footer>&copy; 2020<script>(new Date).getFullYear()>2010&&document.write(" - "+(new Date).getFullYear())</script></div><div class=language><a href=# alt=EN data-google-lang=en class=language__img>🇬🇧</a>
<a href=# alt=UA data-google-lang=uk class=language__img>🇺🇦</a>
<a href=# alt=PL data-google-lang=pl class=language__img>🇵🇱</a>
<a href=# alt=IL data-google-lang=iw class=language__img>🇮🇱</a>
<a href=# alt=DE data-google-lang=de class=language__img>🇩🇪</a>
<a href=# alt=FR data-google-lang=fr class=language__img>🇫🇷</a>
<a href=# alt=ES data-google-lang=es class=language__img>🇪🇸</a>
<a href=# alt=IT data-google-lang=it class=language__img>🇮🇹</a>
<a href=# alt=NL data-google-lang=nl class=language__img>🇳🇱</a>
<a href=# alt=ZH data-google-lang=zh-CN class=language__img>🇨🇳</a>
<img src=../../img/ru.png alt=ru data-google-lang=ru class=language__img height=10></div></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>ZigUSB</h1><div class=post-meta><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Mar 29, 2023</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 min read</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=//xyzroe.cc/tags/usb/>USB</a>
<a class=tag href=//xyzroe.cc/tags/cc2530/>CC2530</a>
<a class=tag href=//xyzroe.cc/tags/zigbee/>Zigbee</a>
<a class=tag href=//xyzroe.cc/tags/diy/>DIY</a></div></div></header><div class=post-content>ZigUSB was developed as a device that allows you to control and monitor the power of a device connected via USB.
Using this device, you can remotely control the power of the USB port to turn on or off the connected device. And also monitor the current voltage and current. And it's not a bad Zigbee network router.
Frequent use cases: converting a "stupid" USB lamp into a "smart" one; connecting modems / sticks / adapters, which sometimes require a power reset; monitoring the current consumption of any connected device.
Possibilities:
- Power on/off by push button and via Zigbee network.
- Automatic restart loop of the connected device with a single Zigbee command.
- Monitoring of voltage and current supplied to the connected device, INA219 chip.
- Setting the maximum USB current using a variable resistor on the board (1.0-3.2A)
- For power management, a MIC2545A USB switch chip is used.
- E18-MS1PA2-PCB (CC2530 with +20dBi amplifier) ​​was used as the Zigbee chip, which allows it to be used in remote places, and at the same time act as a good router for other devices.
- USB data transfer is available. This may be needed when connecting a USB modem to a router that does not know how to manage USB power, and the modem may need to be rebooted.
- Designed for AK-N-12 case.
### Overview
#### Touch version<div align=center><img width=20% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/top_touch.png>
<img width=20% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/bottom_touch.png></div>#### Button version<div align=center><img width=20% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/top.png>
<img width=20% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/bottom.png></div>### Photos
#### Touch version<table><tr><td width=50%><img src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/top_case_touch.jpeg></td><td><img src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/back_case_touch.jpeg></td></tr></table><div align=center><img width=70% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/top_pcb_touch.jpeg></div>#### Button version<table><tr><td width=50%><img src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/top_case.jpeg></td><td><img src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/back_case.jpeg></td></tr><tr><td width=50%><img src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/top_pcb.jpeg></td><td><img src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/back_pcb.jpeg></td></tr></table>### Schematic<div align=center><img width=90% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/hardware/Schematic_ZigUSB.png></div><div align=center><img width=90% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/hardware/Schematic_ZigUSB_touch.png></div>### PTVO Config
#### Touch version<div align=center><img width=70% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/ptvo_1_touch.png></div>#### Button version<div align=center><img width=70% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/ptvo_1.png></div>#### zigbee2mqtt & Home Assistant overview
<div align=center></div><table><tbody><tr><td><img width=50% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/z2m_device.png></td><td rowspan=2><img src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/ha.png></td></tr><tr><td><img width=70% src=https://raw.githubusercontent.com/xyzroe/ZigUSB/main/images/z2m_exposes.png></td></tr></tbody></table>### Hardware files
#### Touch version
[Gerber](https://raw.githubusercontent.com/xyzroe/ZigUSB/main/hardware/Gerber_ZigUSB_touch.zip)
[BOM](https://raw.githubusercontent.com/xyzroe/ZigUSB/main/hardware/BOM_ZigUSB_touch.csv) or [iBOM](https://xyzroe.cc/ZigUSB/hardware/iBOM_ZigUSB_touch.html) 🚀
#### Button version
[Gerber](https://raw.githubusercontent.com/xyzroe/ZigUSB/main/hardware/Gerber_ZigUSB.zip)
[BOM](https://raw.githubusercontent.com/xyzroe/ZigUSB/main/hardware/BOM_ZigUSB.csv) or [iBOM](https://xyzroe.cc/ZigUSB/hardware/zigbee_usb_power_switch_final_rev0.html) 🚀
### Firmware files
[NEW z2m external converter](https://github.com/xyzroe/ZigUSB/tree/main/firmware/ZigUSB_updated.js) 🎉 (for new z2m ext converter format)
[old z2m external converter](https://github.com/xyzroe/ZigUSB/tree/main/firmware/ZigUSB.js)
[All FW .hex, PTVO .ini, .txt and converter .js files](https://github.com/xyzroe/ZigUSB/tree/main/firmware)
### Where to buy?
Tindie stopped supporting shipments from Ukraine, so now you can only buy on my partners’ website (shipping worldwide)
<a href=https://mind.in.ua/><img src=https://static.tildacdn.com/tild3433-3934-4565-b362-386238366331/logo_full.png alt="Go to mind.in.ua" height=120></a>
### Like ♥️?
[!["Buy Me A Coffee"](https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png)](https://www.buymeacoffee.com/xyzroe)<br>[![Made in Ukraine](https://img.shields.io/badge/made_in-ukraine-ffd700.svg?labelColor=0057b7)](https://stand-with-ukraine.pp.ua)
### Inspired by
1. The original project of USB switch by [Kasito](https://kasito.ru/zigbee-vyklyuchatel-usb-nagruzki/)
2. Zigbee configurable firmware [PTVO](https://ptvo.info)<br>ZigUSB is licensed under the
[GNU General Public License v3.0](https://raw.githubusercontent.com/xyzroe/ZigUSB/main/LICENSE)</div><div class=post-footer></div></article></main><script>feather.replace()</script></body></html>