<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Alco Post | xyzroe's blog</title><meta name=description content=" Hardware and software complex of the checkpoint 1 turnstile any 2 controllers ZK MA300 2 alcotesters Alcofor S40 1 speaker and LED unit with voice prompts and ‚Ä¶"><meta property="og:title" content="Alco Post | xyzroe's blog"><meta property="og:description" content=" Hardware and software complex of the checkpoint 1 turnstile any 2 controllers ZK MA300 2 alcotesters Alcofor S40 1 speaker and LED unit with voice prompts and ‚Ä¶"><meta property="og:type" content="article"><meta property="og:url" content="/posts/alcopost/"><meta property="og:site_name" content="xyzroe's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Alco Post | xyzroe's blog"><meta name=twitter:description content=" Hardware and software complex of the checkpoint 1 turnstile any 2 controllers ZK MA300 2 alcotesters Alcofor S40 1 speaker and LED unit with voice prompts and ‚Ä¶"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","name":"Alco Post | xyzroe\u0027s blog","url":"\/posts\/alcopost\/","headline":"Alco Post","datePublished":"2018-05-15T00:00:00Z","author":{"@type":"Person","name":"xyzroe"}}</script><link rel=stylesheet href=/scss/main.min.1d1fe03b396532170236a6ca8173c8391e4fa34f887c1157456e848138ce997d.css integrity="sha256-HR/gOzllMhcCNqbKgXPIOR5Po0+IfBFXRW6EgTjOmX0="><script src=/js/main.min.f6ca1ba1f6d8ce1ff00e4297e1c18f2d5bab853850f82c9d5419deb26fa3c893.js integrity="sha256-9sobofbYzh/wDkKX4cGPLVurhThQ+CydVBnesm+jyJM=" defer></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-5JP6L4L4DL"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5JP6L4L4DL")</script><link rel=icon type=image/png href=/img/favicon-96x96.png sizes=96x96><link rel=icon type=image/svg+xml href=/img/favicon.svg><link rel="shortcut icon" href=/img/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/apple-touch-icon.png><meta name=apple-mobile-web-app-title content="xyzroe.cc"><link rel=manifest href=/img/site.webmanifest><link rel=stylesheet href=/css/google-translate.css><link rel=stylesheet href=/css/accordion.css><link rel=stylesheet href=/css/custom.css><script src=https://unpkg.com/feather-icons></script><script src=https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js></script><script src=/js/google-translate.js></script><script src=/js/custom.js></script></head><body><div class=particles id=particles></div><nav role=navigation aria-label="Main navigation"><div class=container><div class=nav-container><a href=/ class=logo aria-label="xyzroe's blog - Home"><img src=/img/logo.png alt="xyzroe's blog">XYZROE</a><ul class=nav-links id=nav-menu><li><a href=/ aria-current=false>Home</a></li><li><a href=/posts/ aria-current=false>Projects</a></li><li><a href=/about/ aria-current=false>About</a></li><li><a href=/social/ aria-current=false>Social</a></li></ul><button class=mobile-menu-btn aria-expanded=false aria-controls=nav-menu aria-label="Toggle navigation menu">‚ò∞</button><div class=language-selector><div class=flag-icon>üåç</div><div class=language-list style=display:none><a href=# alt=EN data-google-lang=en class="language__img language__img_active">üá¨üáß</a>
<a href=# alt=UA data-google-lang=uk class=language__img>üá∫üá¶</a>
<a href=# alt=PL data-google-lang=pl class=language__img>üáµüá±</a>
<a href=# alt=IL data-google-lang=iw class=language__img>üáÆüá±</a>
<a href=# alt=DE data-google-lang=de class=language__img>üá©üá™</a>
<a href=# alt=FR data-google-lang=fr class=language__img>üá´üá∑</a>
<a href=# alt=ES data-google-lang=es class=language__img>üá™üá∏</a>
<a href=# alt=IT data-google-lang=it class=language__img>üáÆüáπ</a>
<a href=# alt=NL data-google-lang=nl class=language__img>üá≥üá±</a>
<a href=# alt=RU data-google-lang=ru class=language__img>üá∑üá∫</a>
<a href=# alt=ZH data-google-lang=zh-CN class=language__img>üá®üá≥</a></div></div></div></div></nav><main id=main role=main><div class=about-container><article class=about-content><div class=terminal-header><div class=terminal-buttons><span class=btn-close></span>
<span class=btn-minimize></span>
<span class=btn-maximize></span></div><div class=terminal-title>Alco Post.md</div></div><div class=terminal-body><div class=prompt-line><span class=prompt>$</span>
<span class=command>cat alco post.md</span></div><div class=content><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin=anonymous><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><h2 id=hardware-and-software-complex-of-the-checkpoint>Hardware and software complex of the checkpoint</h2><ul><li>1 turnstile any</li><li>2 controllers ZK MA300</li><li>2 alcotesters Alcofor S40</li><li>1 speaker and LED unit with voice prompts and mode indication</li><li>1 orange pi with python utility for displaying photos and status of passing through the turnstile and writing to the database</li></ul><p>order of actions: authorization to ZK - alcohol test - in case of an error again - in case of an error, again record the violation and refusal to work (or notification of dismissal, but with permission to exit) - record a successful passage and farewell.</p><link rel=stylesheet href=/css/hugo-easy-gallery.css><div class="gallery caption-position-bottom caption-effect-slide hover-effect-zoom hover-transition" itemscope itemtype=http://schema.org/ImageGallery><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/buttons.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/buttons.jpg alt=Buttons></div><figcaption><p>Buttons</p></figcaption><a href=/posts/alcopost/photos/buttons.jpg itemprop=contentUrl></a></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/general.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/general.jpg alt=General></div><figcaption><p>General</p></figcaption><a href=/posts/alcopost/photos/general.jpg itemprop=contentUrl></a></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/inside_1.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/inside_1.jpg alt="Inside 1"></div><figcaption><p>Inside 1</p></figcaption><a href=/posts/alcopost/photos/inside_1.jpg itemprop=contentUrl></a></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/inside_2.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/inside_2.jpg alt="Inside 2"></div><figcaption><p>Inside 2</p></figcaption><a href=/posts/alcopost/photos/inside_2.jpg itemprop=contentUrl></a></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/inside_3.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/inside_3.jpg alt="Inside 3"></div><figcaption><p>Inside 3</p></figcaption><a href=/posts/alcopost/photos/inside_3.jpg itemprop=contentUrl></a></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/inside_4.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/inside_4.jpg alt="Inside 4"></div><figcaption><p>Inside 4</p></figcaption><a href=/posts/alcopost/photos/inside_4.jpg itemprop=contentUrl></a></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/inside_5.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/inside_5.jpg alt="Inside 5"></div><figcaption><p>Inside 5</p></figcaption><a href=/posts/alcopost/photos/inside_5.jpg itemprop=contentUrl></a></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/nvrs.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/nvrs.jpg alt=Nvrs></div><figcaption><p>Nvrs</p></figcaption><a href=/posts/alcopost/photos/nvrs.jpg itemprop=contentUrl></a></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/screen.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/screen.jpg alt=Screen></div><figcaption><p>Screen</p></figcaption><a href=/posts/alcopost/photos/screen.jpg itemprop=contentUrl></a></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/table.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/table.jpg alt=Table></div><figcaption><p>Table</p></figcaption><a href=/posts/alcopost/photos/table.jpg itemprop=contentUrl></a></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/posts/alcopost/photos/turnstile.jpg)><img itemprop=thumbnail src=/posts/alcopost/photos/turnstile.jpg alt=Turnstile></div><figcaption><p>Turnstile</p></figcaption><a href=/posts/alcopost/photos/turnstile.jpg itemprop=contentUrl></a></figure></div></div><p><a href=alcopost.pdf>Schematic</a>
<a href=alcopost.pdf><i data-feather=download stroke-width=2 width=26 height=26 color=#fff style=position:relative;top:10px></i>
<span class=screen-reader-text></span>
</a><script type=text/javascript src=/js/pdf-js/build/pdf.js></script><style>#the-canvas{border:1px solid #000;direction:ltr;width:100%;height:auto}#paginator{text-align:center;margin-bottom:10px}</style><div id=paginator><button id=prev>Previous</button>
<button id=next>Next</button>
&nbsp; &nbsp;
<span>Page: <span id=page_num></span> / <span id=page_count></span></span></div><div id=embed-pdf-container><canvas id=the-canvas></canvas></div><script type=text/javascript>window.onload=function(){c="/posts/alcopost/alcopost.pdf",r="true",s=window["pdfjs-dist/build/pdf"],s.GlobalWorkerOptions.workerSrc="//js/pdf-js/build/pdf.worker.js";var s,r,c,n=null,e=1,o=!1,t=null,d=3,i=document.getElementById("the-canvas"),u=i.getContext("2d");function a(e){o=!0,n.getPage(e).then(function(e){var s,r,n=e.getViewport({scale:d});i.height=n.height,i.width=n.width,s={canvasContext:u,viewport:n},r=e.render(s),r.promise.then(function(){o=!1,t!==null&&(a(t),t=null)})}),document.getElementById("page_num").textContent=e}function l(e){o?t=e:a(e)}r=="true"&&(document.getElementById("paginator").style.display="none");function h(){if(e<=1)return;e--,l(e)}document.getElementById("prev").addEventListener("click",h);function m(){if(e>=n.numPages)return;e++,l(e)}document.getElementById("next").addEventListener("click",m),s.getDocument(c).promise.then(function(t){n=t,document.getElementById("page_count").textContent=n.numPages,a(e)})}</script></p><p><a href=OrangePi.zip>OrangePi Alco Post utility</a>
<a href=OrangePi.zip><i data-feather=download stroke-width=2 width=26 height=26 color=#fff style=position:relative;top:10px></i>
<span class=screen-reader-text></span></a></p><p><a href=Arduino/Wiegand-V3-Library-for-all-Arduino.zip>Wiegand-V3-Library-for-all-Arduino.zip</a>
<a href=Arduino/Wiegand-V3-Library-for-all-Arduino.zip><i data-feather=download stroke-width=2 width=26 height=26 color=#fff style=position:relative;top:10px></i>
<span class=screen-reader-text></span></a></p><div class=tab><div class=tab-label data-tab-id=278a68fcc0c8830c45d278f02b0a0241><span class=tab-toggle>+</span>
<span class=tab-title>Arduino code</span>
<a href=/posts/alcopost/Arduino/bio_alco_ctr_v2.ino download class=tab-download title=Download onclick=event.stopPropagation()><i data-feather=download stroke-width=1.75 width=20 height=20></i></a></div><div class=tab-content id=tab-278a68fcc0c8830c45d278f02b0a0241><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;Wiegand.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;ButtonDebounce.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>//#include &lt;avr/wdt.h&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;DFPlayer_Mini_Mp3.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define FALSE 0
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define TRUE  1
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define ENTER 1
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define EXIT  2
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define ON    1
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define OFF   0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>//Input Pins
</span></span></span><span style=display:flex><span><span style=color:#75715e>//uln2804 - 1 - 0,1,2,3,4
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define EnterZK         23
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define EnterAlcoOK     25
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define EnterAlcoAL     27
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define EnterAlcoRD     29
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define EnterAlcoOn     31
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>//#define TurnReady       33
</span></span></span><span style=display:flex><span><span style=color:#75715e>//#define TurnReady       35
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//uln2804 - 2 - 0,1,2,3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define ExitZK          62
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define ExitAlcoOK      63
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define ExitAlcoAL      64
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define ExitAlcoRD      65
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define ExitAlcoOn      66
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>//Output Pins
</span></span></span><span style=display:flex><span><span style=color:#75715e>//uln2803 - 1 - 0,1,2,3,4,5,6
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define EnterLedGo      39
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define EnterLedStop    41
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define EnterAlcoRun    43
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define ExitLedGo       45
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define ExitLedStop     47
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define ExitAlcoRun     49
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define TurnEnter       51
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define TurnExit        53
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define Vorota          59
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define DoorStreet      60
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define AlcoAlarm       61
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>//Times setup
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define LockOpenTime    2000
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define AlarmOnTime     700
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define ResetStageTime  15</span><span style=color:#75715e>//seconds
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define AlcoStartTime   500
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define AlcoWaitMaxTime 5 </span><span style=color:#75715e>//seconds
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>//DFPlayer setup
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define busyDFpin       7
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define mp3volume       25
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define soundStartAgain 1 </span><span style=color:#75715e>//–ù–∞—á–Ω–∏—Ç–µ —Å –Ω–∞—á–∞–ª–∞.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define soundAlcoHowTo  2 </span><span style=color:#75715e>//–°–¥–µ–ª–∞–π—Ç–µ –≤–¥–æ—Ö, –¥–æ–∂–¥–∏—Ç–µ—Å—å –∑–µ–ª–µ–Ω–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞, –≤—ã–¥–æ—Ö–Ω–∏—Ç–µ –≤ –ø—Ä–æ–∑—Ä–∞—á–Ω—É—é —Ç—Ä—É–±–∫—É.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define soundEnterOK    3 </span><span style=color:#75715e>//–°–ø–∞—Å–∏–±–æ! –•–æ—Ä–æ—à–µ–π –í–∞–º —Å–º–µ–Ω—ã!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define soundExitOK     4 </span><span style=color:#75715e>//–°–ø–∞—Å–∏–±–æ! –•–æ—Ä–æ—à–µ–≥–æ –í–∞–º –æ—Ç–¥—ã—Ö–∞!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define soundError      5 </span><span style=color:#75715e>//–û—à–∏–±–∫–∞!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define soundNextTry    6 </span><span style=color:#75715e>//–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define soundEnterAlarm 7 </span><span style=color:#75715e>//–í—ã –ø—Ä–∏—à–ª–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É –≤ –∞–ª–∫–æ–≥–æ–ª—å–Ω–æ–º –æ–ø—å—è–Ω–µ–Ω–∏–∏, –∏ –Ω–∞ —Ä–∞–±–æ—Ç—É –Ω–µ –¥–æ–ø—É—â–µ–Ω—ã.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define soundExitAlarm  8 </span><span style=color:#75715e>//–í—ã —É–ø–æ—Ç—Ä–µ–±–ª—è–ª–∏ –∞–ª–∫–æ–≥–æ–ª—å –Ω–∞ —Ä–∞–±–æ—Ç–µ, –∏ –∑–∞ —ç—Ç–æ –≤–∞—Å –æ—à—Ç—Ä–∞—Ñ—É—é—Ç. –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –≤—ã –±—É–¥–µ—Ç–µ —É–≤–æ–ª–µ–Ω—ã!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define soundGo         9 </span><span style=color:#75715e>//–ü—Ä–æ—Ö–æ–¥–∏—Ç–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>ButtonDebounce <span style=color:#a6e22e>enterZK</span>(EnterZK, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>ButtonDebounce <span style=color:#a6e22e>enterAlcoOK</span>(EnterAlcoOK, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>ButtonDebounce <span style=color:#a6e22e>enterAlcoAL</span>(EnterAlcoAL, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>ButtonDebounce <span style=color:#a6e22e>enterAlcoRD</span>(EnterAlcoRD, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>ButtonDebounce <span style=color:#a6e22e>enterAlcoOn</span>(EnterAlcoOn, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>ButtonDebounce <span style=color:#a6e22e>exitZK</span>(ExitZK, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>ButtonDebounce <span style=color:#a6e22e>exitAlcoOK</span>(ExitAlcoOK, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>ButtonDebounce <span style=color:#a6e22e>exitAlcoAL</span>(ExitAlcoAL, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>ButtonDebounce <span style=color:#a6e22e>exitAlcoRD</span>(ExitAlcoRD, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>ButtonDebounce <span style=color:#a6e22e>exitAlcoOn</span>(ExitAlcoOn, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//ButtonDebounce turnReady(TurnReady, 100);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>//unsigned long previousMillis = 0;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> currentMillis <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> lastOpenEnter <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> lastOpenExit <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> lastOpenStreet <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> lastOpenVorota <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> cycles <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> cycles_Enter <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> cycles_Exit <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> enterStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> exitStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> lastEnterEmp <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> lastExitEmp <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> enterEnable;
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> exitEnable;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WIEGAND wg;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> byte numChars <span style=color:#f92672>=</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>char</span> receivedChars[numChars]; <span style=color:#75715e>// an array to store the received data
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>boolean newData <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>char</span> taskPC[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>0</span>};
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> dirPC <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>char</span> recvChar;
</span></span><span style=display:flex><span><span style=color:#66d9ef>char</span> endMarker <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&gt;&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>//Serial begin
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  Serial.<span style=color:#a6e22e>begin</span>(<span style=color:#ae81ff>9600</span>);
</span></span><span style=display:flex><span>  Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;Fingerprints Alcometers Turnstile Controler v0.5a&#34;</span>));
</span></span><span style=display:flex><span>  Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;start boot&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//Initialised output pins
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>pinMode</span>(EnterLedGo, OUTPUT); <span style=color:#a6e22e>digitalWrite</span>(EnterLedGo, LOW);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(TurnEnter, OUTPUT); <span style=color:#a6e22e>digitalWrite</span>(TurnEnter, LOW);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(EnterAlcoRun, OUTPUT); <span style=color:#a6e22e>digitalWrite</span>(EnterAlcoRun, LOW);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(ExitLedGo, OUTPUT); <span style=color:#a6e22e>digitalWrite</span>(ExitLedGo, LOW);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(TurnExit, OUTPUT); <span style=color:#a6e22e>digitalWrite</span>(TurnExit, LOW);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(ExitAlcoRun, OUTPUT); <span style=color:#a6e22e>digitalWrite</span>(ExitAlcoRun, LOW);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(AlcoAlarm, OUTPUT); <span style=color:#a6e22e>digitalWrite</span>(AlcoAlarm, LOW);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(DoorStreet, OUTPUT); <span style=color:#a6e22e>digitalWrite</span>(DoorStreet, LOW);
</span></span><span style=display:flex><span>  <span style=color:#75715e>//Watchdog enable
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//wdt_enable(WDTO_8S);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//Wiegand reades config and start
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  wg.D0PinA <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>  wg.D1PinA <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>  wg.D0PinB <span style=color:#f92672>=</span> <span style=color:#ae81ff>19</span>;
</span></span><span style=display:flex><span>  wg.D1PinB <span style=color:#f92672>=</span> <span style=color:#ae81ff>18</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  wg.<span style=color:#a6e22e>begin</span>(TRUE, TRUE);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//DFPlayer-mini mp3 module config and start
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  Serial3.<span style=color:#a6e22e>begin</span>(<span style=color:#ae81ff>9600</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(busyDFpin, INPUT);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mp3_set_serial</span> (Serial3);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mp3_set_volume</span> (mp3volume);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//Serial for Orange PI
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  Serial2.<span style=color:#a6e22e>begin</span>(<span style=color:#ae81ff>9600</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//Start AlcoMeter Enter
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>  cycles <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  enterAlcoOn.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (enterAlcoOn.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>AlcoOnOff</span>(ON, ENTER);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>    enterAlcoOn.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  enterAlcoRD.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (enterAlcoOn.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (enterAlcoRD.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) cycles<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (enterAlcoRD.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> cycles <span style=color:#f92672>&lt;</span> AlcoWaitMaxTime <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span>)  {
</span></span><span style=display:flex><span>      enterAlcoRD.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>      cycles<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (cycles <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> cycles <span style=color:#f92672>&lt;</span> AlcoWaitMaxTime <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span> ) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>AlcoOnOff</span>(OFF, ENTER);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>      enterAlcoRD.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      enterAlcoOn.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (enterAlcoOn.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> enterAlcoRD.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;enable enter alco&#34;</span>));
</span></span><span style=display:flex><span>        enterEnable <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;<span style=color:#75715e>//= 1;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;disable enter alco&#34;</span>));
</span></span><span style=display:flex><span>        enterEnable <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;disable enter alco&#34;</span>));
</span></span><span style=display:flex><span>      enterEnable <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (enterEnable <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) { <span style=color:#75715e>//if error
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>digitalWrite</span>(EnterLedStop, HIGH); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>); <span style=color:#a6e22e>digitalWrite</span>(EnterLedStop, LOW); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>); <span style=color:#a6e22e>digitalWrite</span>(EnterLedStop, HIGH); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>); <span style=color:#a6e22e>digitalWrite</span>(EnterLedStop, LOW); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>); <span style=color:#a6e22e>digitalWrite</span>(EnterLedStop, HIGH); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>); <span style=color:#a6e22e>digitalWrite</span>(EnterLedStop, LOW);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//Start AlcoMeter Exit
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>  cycles <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  exitAlcoOn.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (exitAlcoOn.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>AlcoOnOff</span>(ON, EXIT);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>    exitAlcoOn.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  exitAlcoRD.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (exitAlcoOn.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (exitAlcoRD.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) cycles<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (exitAlcoRD.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> cycles <span style=color:#f92672>&lt;</span> AlcoWaitMaxTime <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span>)  {
</span></span><span style=display:flex><span>      exitAlcoRD.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>      cycles<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (cycles <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> cycles <span style=color:#f92672>&lt;</span> AlcoWaitMaxTime <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span> ) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>AlcoOnOff</span>(OFF, EXIT);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>      exitAlcoRD.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      exitAlcoOn.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (exitAlcoOn.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> exitAlcoRD.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;enable exit alco&#34;</span>));
</span></span><span style=display:flex><span>        exitEnable <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;<span style=color:#75715e>//= 1;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;disable exit alco&#34;</span>));
</span></span><span style=display:flex><span>        exitEnable <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;disable exit alco&#34;</span>));
</span></span><span style=display:flex><span>      exitEnable <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (exitEnable <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) { <span style=color:#75715e>//if error
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>digitalWrite</span>(ExitLedStop, HIGH); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>); <span style=color:#a6e22e>digitalWrite</span>(ExitLedStop, LOW); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>); <span style=color:#a6e22e>digitalWrite</span>(ExitLedStop, HIGH); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>); <span style=color:#a6e22e>digitalWrite</span>(ExitLedStop, LOW); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>); <span style=color:#a6e22e>digitalWrite</span>(ExitLedStop, HIGH); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>); <span style=color:#a6e22e>digitalWrite</span>(ExitLedStop, LOW);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;boot finish&#34;</span>));
</span></span><span style=display:flex><span>  cycles <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>loop</span>() {
</span></span><span style=display:flex><span>  currentMillis <span style=color:#f92672>=</span> <span style=color:#a6e22e>millis</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>wiegandCheck</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>checkEnter</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>checkExit</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>checkLocks</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>recvWithEndMarker</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>wiegandCheck</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (wg.<span style=color:#a6e22e>available</span>())
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    Serial.<span style=color:#a6e22e>print</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Emp = &#34;</span>)); Serial.<span style=color:#a6e22e>print</span>(wg.<span style=color:#a6e22e>getCode</span>()); Serial.<span style=color:#a6e22e>print</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34; gate = &#34;</span>)); Serial.<span style=color:#a6e22e>println</span>(wg.<span style=color:#a6e22e>getGateActive</span>());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (wg.<span style=color:#a6e22e>getGateActive</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>      lastEnterEmp <span style=color:#f92672>=</span> wg.<span style=color:#a6e22e>getCode</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (wg.<span style=color:#a6e22e>getGateActive</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      lastExitEmp <span style=color:#f92672>=</span> wg.<span style=color:#a6e22e>getCode</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>checkEnter</span>() {
</span></span><span style=display:flex><span>  enterZK.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>switch</span> (enterStage) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (enterZK.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> LOW <span style=color:#f92672>&amp;&amp;</span> lastEnterEmp <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        enterStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>printStage</span>(ENTER);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (enterEnable <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>digitalWrite</span>(EnterLedGo, HIGH);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>mp3_play</span> (soundAlcoHowTo); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>AlcoOnOff</span>(ON, ENTER);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>mp3_play</span> (soundEnterOK); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>          enterStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>printStage</span>(ENTER);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>digitalWrite</span>(TurnEnter, HIGH); lastOpenEnter <span style=color:#f92672>=</span> currentMillis;
</span></span><span style=display:flex><span>          Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Enter On&#34;</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      enterAlcoOn.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      enterAlcoOK.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      enterAlcoAL.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (enterAlcoOK.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> HIGH <span style=color:#f92672>&amp;&amp;</span> enterAlcoAL.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> HIGH <span style=color:#f92672>&amp;&amp;</span> cycles_Enter <span style=color:#f92672>&lt;</span> ResetStageTime <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span> ) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        cycles_Enter<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (enterAlcoOK.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>        cycles_Enter <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mp3_play</span> (soundEnterOK); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>        enterStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>printStage</span>(ENTER);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>digitalWrite</span>(TurnEnter, HIGH); lastOpenEnter <span style=color:#f92672>=</span> currentMillis;
</span></span><span style=display:flex><span>        Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Enter On&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (enterAlcoOK.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>          enterAlcoOK.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (enterAlcoAL.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>        cycles_Enter <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mp3_play</span> (soundError); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>digitalWrite</span>(EnterLedStop, HIGH);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>digitalRead</span>(busyDFpin) <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>digitalWrite</span>(EnterLedStop, LOW);
</span></span><span style=display:flex><span>        <span style=color:#75715e>//enterStage = enterStage + 1;//–≤—Ç–æ—Ä–∞—è –ø–æ–ø—ã—Ç–∫–∞
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        enterStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>; <span style=color:#75715e>//–ø–µ—Ä–µ—Ö–æ–¥–∏–º —Å—Ä–∞–∑—É –∫ —Å–æ–æ–±—â–µ–Ω–∏—é –æ–± –∞–ª–∫–æ–≥–æ–ª–∏–∑–º–µ enterStage = 4; //–ø–µ—Ä–µ—Ö–æ–¥–∏–º —Å—Ä–∞–∑—É –∫ —Å–æ–æ–±—â–µ–Ω–∏—é –æ–± –∞–ª–∫–æ–≥–æ–ª–∏–∑–º–µ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (enterStage <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>) <span style=color:#a6e22e>printStage</span>(ENTER);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (enterAlcoAL.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>          enterAlcoAL.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (cycles_Enter <span style=color:#f92672>&gt;=</span> ResetStageTime <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span>) {
</span></span><span style=display:flex><span>        cycles_Enter <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        Serial.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;s| time out while enter alco test&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mp3_play</span> (soundError); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>digitalRead</span>(busyDFpin) <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mp3_play</span> (soundStartAgain); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>        enterStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mp3_play</span> (soundNextTry); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>      enterStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>printStage</span>(ENTER);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>digitalWrite</span>(EnterLedStop, HIGH);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>digitalWrite</span>(AlcoAlarm, HIGH); <span style=color:#a6e22e>delay</span>(AlarmOnTime); <span style=color:#a6e22e>digitalWrite</span>(AlcoAlarm, LOW);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mp3_play</span> (soundEnterAlarm); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>      enterStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      enterStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      lastEnterEmp <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (enterEnable <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>digitalWrite</span>(EnterLedGo, LOW);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>digitalWrite</span>(EnterLedStop, LOW);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>AlcoOnOff</span>(OFF, ENTER);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| finish entering&#34;</span>));
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>checkExit</span>() {
</span></span><span style=display:flex><span>  exitZK.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>switch</span> (exitStage) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (exitZK.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> LOW <span style=color:#f92672>&amp;&amp;</span> lastExitEmp <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        exitStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>printStage</span>(EXIT);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (exitEnable <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>digitalWrite</span>(ExitLedGo, HIGH);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>mp3_play</span> (soundAlcoHowTo); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>AlcoOnOff</span>(ON, EXIT);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>mp3_play</span> (soundExitOK); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>          exitStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>printStage</span>(EXIT);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>digitalWrite</span>(TurnExit, HIGH); lastOpenExit <span style=color:#f92672>=</span> currentMillis;
</span></span><span style=display:flex><span>          Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Exit On&#34;</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Serial.println(&#34;s| case 1 3&#34;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      exitAlcoOn.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      exitAlcoOK.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      exitAlcoAL.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (exitAlcoOK.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> HIGH <span style=color:#f92672>&amp;&amp;</span> exitAlcoAL.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> HIGH <span style=color:#f92672>&amp;&amp;</span> cycles_Exit <span style=color:#f92672>&lt;</span> ResetStageTime <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span> ) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        cycles_Exit<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (exitAlcoOK.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>        cycles_Exit <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mp3_play</span> (soundExitOK); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>        exitStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>printStage</span>(EXIT);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>digitalWrite</span>(TurnExit, HIGH); lastOpenExit <span style=color:#f92672>=</span> currentMillis;
</span></span><span style=display:flex><span>        Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Exit On&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (exitAlcoOK.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>          exitAlcoOK.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (exitAlcoAL.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>        cycles_Exit <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mp3_play</span> (soundError); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>digitalWrite</span>(ExitLedStop, HIGH);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>digitalRead</span>(busyDFpin) <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>digitalWrite</span>(ExitLedStop, LOW);
</span></span><span style=display:flex><span>        <span style=color:#75715e>//exitStage = exitStage + 1;//–≤—Ç–æ—Ä–∞—è –ø–æ–ø—ã—Ç–∫–∞
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        exitStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>; <span style=color:#75715e>//–ø–µ—Ä–µ—Ö–æ–¥–∏–º —Å—Ä–∞–∑—É –∫ —Å–æ–æ–±—â–µ–Ω–∏—é –æ–± –∞–ª–∫–æ–≥–æ–ª–∏–∑–º–µ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (exitStage <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>) <span style=color:#a6e22e>printStage</span>(EXIT);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (exitAlcoAL.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>          exitAlcoAL.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (cycles_Exit <span style=color:#f92672>&gt;=</span> ResetStageTime <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span>) {
</span></span><span style=display:flex><span>        cycles_Exit <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        Serial.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;s| time out while exit alco test&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mp3_play</span> (soundError); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>digitalRead</span>(busyDFpin) <span style=color:#f92672>==</span> LOW) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mp3_play</span> (soundStartAgain); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>        exitStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mp3_play</span> (soundNextTry); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>      exitStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>printStage</span>(EXIT);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>digitalWrite</span>(ExitLedStop, HIGH);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>digitalWrite</span>(AlcoAlarm, HIGH); <span style=color:#a6e22e>delay</span>(AlarmOnTime); <span style=color:#a6e22e>digitalWrite</span>(AlcoAlarm, LOW);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mp3_play</span> (soundExitAlarm); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>      exitStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      exitStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      lastExitEmp <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (exitEnable <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>digitalWrite</span>(ExitLedGo, LOW);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>digitalWrite</span>(ExitLedStop, LOW);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>AlcoOnOff</span>(OFF, EXIT);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| finish exiting&#34;</span>));
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>checkLocks</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (lastOpenEnter <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> (currentMillis <span style=color:#f92672>-</span> lastOpenEnter) <span style=color:#f92672>&gt;=</span> LockOpenTime) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>digitalWrite</span>(TurnEnter, LOW);
</span></span><span style=display:flex><span>    lastOpenEnter <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Enter Off&#34;</span>));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (lastOpenExit <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> (currentMillis <span style=color:#f92672>-</span> lastOpenExit) <span style=color:#f92672>&gt;=</span> LockOpenTime) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>digitalWrite</span>(TurnExit, LOW);
</span></span><span style=display:flex><span>    lastOpenExit <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Exit Off&#34;</span>));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (lastOpenStreet <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> (currentMillis <span style=color:#f92672>-</span> lastOpenStreet) <span style=color:#f92672>&gt;=</span> LockOpenTime) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>digitalWrite</span>(DoorStreet, LOW);
</span></span><span style=display:flex><span>    lastOpenStreet <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Street Off&#34;</span>));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (lastOpenVorota <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> (currentMillis <span style=color:#f92672>-</span> lastOpenVorota) <span style=color:#f92672>&gt;=</span> LockOpenTime) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>digitalWrite</span>(Vorota, LOW);
</span></span><span style=display:flex><span>    lastOpenVorota <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Vorota Off&#34;</span>));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>AlcoOnOff</span>(<span style=color:#66d9ef>int</span> State, <span style=color:#66d9ef>int</span> Gate) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (Gate <span style=color:#f92672>==</span> ENTER) {
</span></span><span style=display:flex><span>    enterAlcoOn.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (enterAlcoOn.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>!=</span> State) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>digitalWrite</span>(EnterAlcoRun, HIGH); <span style=color:#a6e22e>delay</span>(AlcoStartTime); <span style=color:#a6e22e>digitalWrite</span>(EnterAlcoRun, LOW);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (State <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Alco Enter Off&#34;</span>));
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (State <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Alco Enter On&#34;</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (Gate <span style=color:#f92672>==</span> EXIT) {
</span></span><span style=display:flex><span>    exitAlcoOn.<span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (exitAlcoOn.<span style=color:#a6e22e>state</span>() <span style=color:#f92672>!=</span> State) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>digitalWrite</span>(ExitAlcoRun, HIGH); <span style=color:#a6e22e>delay</span>(AlcoStartTime); <span style=color:#a6e22e>digitalWrite</span>(ExitAlcoRun, LOW);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (State <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Alco Exit Off&#34;</span>));
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (State <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Alco Exit On&#34;</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>printStage</span>(<span style=color:#66d9ef>int</span> Gate) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (Gate <span style=color:#f92672>==</span> ENTER) {
</span></span><span style=display:flex><span>    Serial2.<span style=color:#a6e22e>print</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;ENTER|&#34;</span>)); Serial2.<span style=color:#a6e22e>print</span>(lastEnterEmp); Serial2.<span style=color:#a6e22e>print</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;|&#34;</span>)); Serial2.<span style=color:#a6e22e>println</span>(enterStage);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (Gate <span style=color:#f92672>==</span> EXIT) {
</span></span><span style=display:flex><span>    Serial2.<span style=color:#a6e22e>print</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;EXIT|&#34;</span>)); Serial2.<span style=color:#a6e22e>print</span>(lastExitEmp); Serial2.<span style=color:#a6e22e>print</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;|&#34;</span>)); Serial2.<span style=color:#a6e22e>println</span>(exitStage);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>recvWithEndMarker</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>static</span> byte ndx <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>char</span> endMarker <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;\n&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>char</span> rc;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> (Serial2.<span style=color:#a6e22e>available</span>() <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> newData <span style=color:#f92672>==</span> false) {
</span></span><span style=display:flex><span>    rc <span style=color:#f92672>=</span> Serial2.<span style=color:#a6e22e>read</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (rc <span style=color:#f92672>!=</span> endMarker) {
</span></span><span style=display:flex><span>      receivedChars[ndx] <span style=color:#f92672>=</span> rc;
</span></span><span style=display:flex><span>      ndx<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (ndx <span style=color:#f92672>&gt;=</span> numChars) {
</span></span><span style=display:flex><span>        ndx <span style=color:#f92672>=</span> numChars <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      receivedChars[ndx] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;\0&#39;</span>; <span style=color:#75715e>// terminate the string
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      ndx <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      newData <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>parseData</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parseData</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span> strtokIndx; <span style=color:#75715e>// this is used by strtok() as an index
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  strtokIndx <span style=color:#f92672>=</span> <span style=color:#a6e22e>strtok</span>(receivedChars, <span style=color:#e6db74>&#34;|&#34;</span>); <span style=color:#75715e>// get the first part - the string
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>strcpy</span>(taskPC, strtokIndx); <span style=color:#75715e>// copy it to taskPC
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  Serial.<span style=color:#a6e22e>println</span>(taskPC);
</span></span><span style=display:flex><span>  strtokIndx <span style=color:#f92672>=</span> <span style=color:#a6e22e>strtok</span>(NULL, <span style=color:#e6db74>&#34;|&#34;</span>); <span style=color:#75715e>// this continues where the previous call left off
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  dirPC <span style=color:#f92672>=</span> <span style=color:#a6e22e>atoi</span>(strtokIndx); <span style=color:#75715e>// convert this part to an integer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  Serial.<span style=color:#a6e22e>println</span>(dirPC);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>showParsedData</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>showParsedData</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (taskPC[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;O&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> (dirPC) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>digitalWrite</span>(TurnEnter, HIGH); lastOpenEnter <span style=color:#f92672>=</span> currentMillis;
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>mp3_play</span> (soundGo); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>          Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Enter On&#34;</span>));
</span></span><span style=display:flex><span>          enterStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>digitalWrite</span>(TurnExit, HIGH); lastOpenExit <span style=color:#f92672>=</span> currentMillis;
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>mp3_play</span> (soundGo); <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>250</span>);
</span></span><span style=display:flex><span>          Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Exit On&#34;</span>));
</span></span><span style=display:flex><span>          exitStage <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>digitalWrite</span>(DoorStreet, HIGH); lastOpenStreet <span style=color:#f92672>=</span> currentMillis;
</span></span><span style=display:flex><span>          Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Street On&#34;</span>));
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>digitalWrite</span>(Vorota, HIGH); lastOpenVorota <span style=color:#f92672>=</span> currentMillis;
</span></span><span style=display:flex><span>          Serial.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>F</span>(<span style=color:#e6db74>&#34;s| Turn Vorota On&#34;</span>));
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  newData <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></div></div></div></article></div></main><footer style="background:rgba(0,0,0,.3);padding:2rem 0;margin-top:4rem;text-align:center;border-top:1px solid rgba(255,255,255,.1)"><div class=container><p style=color:#888;margin:0>Copyright ¬© 2025 ‚Ä¢
Made with ‚ô•Ô∏è by <a href=https://github.com/xyzroe target=_blank style=color:#9d50bb;text-decoration:none>xyzroe</a></p></div></footer><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><script src=/js/load-photoswipe.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin=anonymous></script><script>feather.replace()</script></body></html>