<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Using LED P-10 to display txt file | xyzroe's blog</title><meta name=description content="I need to display actual number of tickets in our service support system using big LED display. ğŸš¨
I found LED P10 modules, they are cheap and nice, different â€¦"><meta property="og:title" content="Using LED P-10 to display txt file | xyzroe's blog"><meta property="og:description" content="I need to display actual number of tickets in our service support system using big LED display. ğŸš¨
I found LED P10 modules, they are cheap and nice, different â€¦"><meta property="og:type" content="article"><meta property="og:url" content="/posts/led_p10/"><meta property="og:site_name" content="xyzroe's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using LED P-10 to display txt file | xyzroe's blog"><meta name=twitter:description content="I need to display actual number of tickets in our service support system using big LED display. ğŸš¨
I found LED P10 modules, they are cheap and nice, different â€¦"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","name":"Using LED P-10 to display txt file | xyzroe\u0027s blog","url":"\/posts\/led_p10\/","headline":"Using LED P-10 to display txt file","datePublished":"2020-05-05T00:00:00Z","author":{"@type":"Person","name":"xyzroe"}}</script><link rel=stylesheet href=/scss/main.min.1d1fe03b396532170236a6ca8173c8391e4fa34f887c1157456e848138ce997d.css integrity="sha256-HR/gOzllMhcCNqbKgXPIOR5Po0+IfBFXRW6EgTjOmX0="><script src=/js/main.min.f6ca1ba1f6d8ce1ff00e4297e1c18f2d5bab853850f82c9d5419deb26fa3c893.js integrity="sha256-9sobofbYzh/wDkKX4cGPLVurhThQ+CydVBnesm+jyJM=" defer></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-5JP6L4L4DL"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5JP6L4L4DL")</script><link rel=icon type=image/png href=/img/favicon-96x96.png sizes=96x96><link rel=icon type=image/svg+xml href=/img/favicon.svg><link rel="shortcut icon" href=/img/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/apple-touch-icon.png><meta name=apple-mobile-web-app-title content="xyzroe.cc"><link rel=manifest href=/img/site.webmanifest><link rel=stylesheet href=/css/google-translate.css><link rel=stylesheet href=/css/accordion.css><link rel=stylesheet href=/css/custom.css><script src=https://unpkg.com/feather-icons></script><script src=https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js></script><script src=/js/google-translate.js></script><script src=/js/custom.js></script></head><body><div class=particles id=particles></div><nav role=navigation aria-label="Main navigation"><div class=container><div class=nav-container><a href=/ class=logo aria-label="xyzroe's blog - Home"><img src=/img/logo.png alt="xyzroe's blog">XYZROE</a><ul class=nav-links id=nav-menu><li><a href=/ aria-current=false>Home</a></li><li><a href=/posts/ aria-current=false>Projects</a></li><li><a href=/about/ aria-current=false>About</a></li><li><a href=/social/ aria-current=false>Social</a></li></ul><button class=mobile-menu-btn aria-expanded=false aria-controls=nav-menu aria-label="Toggle navigation menu">â˜°</button><div class=language-selector><div class=flag-icon>ğŸŒ</div><div class=language-list style=display:none><a href=# alt=EN data-google-lang=en class="language__img language__img_active">ğŸ‡¬ğŸ‡§</a>
<a href=# alt=UA data-google-lang=uk class=language__img>ğŸ‡ºğŸ‡¦</a>
<a href=# alt=PL data-google-lang=pl class=language__img>ğŸ‡µğŸ‡±</a>
<a href=# alt=IL data-google-lang=iw class=language__img>ğŸ‡®ğŸ‡±</a>
<a href=# alt=DE data-google-lang=de class=language__img>ğŸ‡©ğŸ‡ª</a>
<a href=# alt=FR data-google-lang=fr class=language__img>ğŸ‡«ğŸ‡·</a>
<a href=# alt=ES data-google-lang=es class=language__img>ğŸ‡ªğŸ‡¸</a>
<a href=# alt=IT data-google-lang=it class=language__img>ğŸ‡®ğŸ‡¹</a>
<a href=# alt=NL data-google-lang=nl class=language__img>ğŸ‡³ğŸ‡±</a>
<a href=# alt=RU data-google-lang=ru class=language__img>ğŸ‡·ğŸ‡º</a>
<a href=# alt=ZH data-google-lang=zh-CN class=language__img>ğŸ‡¨ğŸ‡³</a></div></div></div></div></nav><main id=main role=main><div class=about-container><article class=about-content><div class=terminal-header><div class=terminal-buttons><span class=btn-close></span>
<span class=btn-minimize></span>
<span class=btn-maximize></span></div><div class=terminal-title>Using LED P-10 to display txt file.md</div></div><div class=terminal-body><div class=prompt-line><span class=prompt>$</span>
<span class=command>cat using led p-10 to display txt file.md</span></div><div class=content><p>I need to display actual number of tickets in our service support system using big LED display. ğŸš¨</p><p>I found LED P10 modules, they are cheap and nice, different colors available. Modules can be connected one by one to make big screen.ğŸ’¡</p><p>Then I need some hardware to connect to P-10 and I found <a href=https://vkmodule.com.ua/LED_P10/ledVBC_P10_1R.html>VBC-P10 module</a> from great Ukrainian ğŸ‡ºğŸ‡¦ manufacture VK Module. But it has only RS485 and TTL ports, while I need Ethernet so I add <a href=https://vkmodule.com.ua/Converter/ConverterE485.html>Ethernet - RS485</a> converter. Now I can print numbers on P-10 sending TCP packets to converter IP address. ğŸš€</p><p>Next step is get current active tickets count. I found out that the one way than our service support system can export number of current active tickets is save txt file with this count, each time it changes. ğŸ˜•</p><p>So I wrote small Python script that reads this file very 5 seconds and if any changes make command and send it to P-10. ğŸ“¡</p><p>Runs using PM2. ecosystem.config.js file is very simple. You can find it at the bottom, after the script. ğŸ¥³</p><div class=tab><div class=tab-label data-tab-id=d0c2de5c596c442807ee3b7667181f11><span class=tab-toggle>+</span>
<span class=tab-title>Python code</span>
<a href=/posts/led_p10/led_p10.py download class=tab-download title=Download onclick=event.stopPropagation()><i data-feather=download stroke-width=1.75 width=20 height=20></i></a></div><div class=tab-content id=tab-d0c2de5c596c442807ee3b7667181f11><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env python</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -*- coding: utf_8 -*-</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> binascii
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> codecs
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> socket
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> serial
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> time <span style=color:#f92672>import</span> sleep
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>file <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/media/itg/bid.txt&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>UART_PORT <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/dev/tty.wchusbserial14130&#39;</span>
</span></span><span style=display:flex><span>UART_SPEED <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;9600&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>TCP_IP <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;192.168.5.61&#39;</span>
</span></span><span style=display:flex><span>TCP_PORT <span style=color:#f92672>=</span> <span style=color:#ae81ff>9761</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>restart_program</span>():
</span></span><span style=display:flex><span>    python <span style=color:#f92672>=</span> sys<span style=color:#f92672>.</span>executable
</span></span><span style=display:flex><span>    os<span style=color:#f92672>.</span>execl(python, python, <span style=color:#f92672>*</span> sys<span style=color:#f92672>.</span>argv)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>sendDataUART</span>(cmd):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>global</span> error
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        error <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        ser <span style=color:#f92672>=</span> serial<span style=color:#f92672>.</span>Serial(UART_PORT, UART_SPEED, timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        ser<span style=color:#f92672>.</span>write(cmd)
</span></span><span style=display:flex><span>        data <span style=color:#f92672>=</span> ser<span style=color:#f92672>.</span>read()
</span></span><span style=display:flex><span>        ser<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>        print (<span style=color:#e6db74>&#34;Received data:&#34;</span>, data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#39;UART ERROR&#39;</span>)
</span></span><span style=display:flex><span>        error <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>sendDataTCP</span>(cmd):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>global</span> error
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        BUFFER_SIZE <span style=color:#f92672>=</span> <span style=color:#ae81ff>4096</span>
</span></span><span style=display:flex><span>        error <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        s <span style=color:#f92672>=</span> socket<span style=color:#f92672>.</span>socket(socket<span style=color:#f92672>.</span>AF_INET, socket<span style=color:#f92672>.</span>SOCK_STREAM)
</span></span><span style=display:flex><span>        s<span style=color:#f92672>.</span>connect((TCP_IP, TCP_PORT))
</span></span><span style=display:flex><span>        s<span style=color:#f92672>.</span>send(cmd)
</span></span><span style=display:flex><span>        data <span style=color:#f92672>=</span> s<span style=color:#f92672>.</span>recv(BUFFER_SIZE)
</span></span><span style=display:flex><span>        s<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>        print (<span style=color:#e6db74>&#34;Received data:&#34;</span>, data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#39;TCP ERROR&#39;</span>)
</span></span><span style=display:flex><span>        error <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>makeCmd</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>global</span> number
</span></span><span style=display:flex><span>    <span style=color:#75715e>#print(packet)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span>        number2 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            f <span style=color:#f92672>=</span> open(file, <span style=color:#e6db74>&#39;r&#39;</span>)
</span></span><span style=display:flex><span>            number2 <span style=color:#f92672>=</span> f<span style=color:#f92672>.</span>readline()
</span></span><span style=display:flex><span>            number2 <span style=color:#f92672>=</span> int(number2)
</span></span><span style=display:flex><span>            print(number2)
</span></span><span style=display:flex><span>            f<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>&#39;FILE OPEN ERROR&#39;</span>)
</span></span><span style=display:flex><span>            sleep(<span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>            restart_program()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> error <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span>            number <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> number2 <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#39;&#39;</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> number2 <span style=color:#f92672>!=</span> number:
</span></span><span style=display:flex><span>                packet <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;0x07 0x30 0x20 0x20 0x20 0x20 0x20 0x20 0x20 0x20&#39;</span>
</span></span><span style=display:flex><span>                packet <span style=color:#f92672>=</span> [int(x, <span style=color:#ae81ff>16</span>) <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> packet<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39; &#39;</span>)]
</span></span><span style=display:flex><span>                number <span style=color:#f92672>=</span> number2
</span></span><span style=display:flex><span>                ones <span style=color:#f92672>=</span> number <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>                tens <span style=color:#f92672>=</span> int((number <span style=color:#f92672>%</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>-</span> ones) <span style=color:#f92672>/</span> <span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>                hund <span style=color:#f92672>=</span> (number <span style=color:#f92672>%</span> <span style=color:#ae81ff>1000</span>) <span style=color:#f92672>//</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>                touz <span style=color:#f92672>=</span> number <span style=color:#f92672>//</span> <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> touz <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>                    packet[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>=</span> int(touz) <span style=color:#f92672>+</span> <span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>                    packet[<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> int(hund) <span style=color:#f92672>+</span> <span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>                    packet[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> int(tens) <span style=color:#f92672>+</span> <span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> hund <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>                    packet[<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> int(hund) <span style=color:#f92672>+</span> <span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>                    packet[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> int(tens) <span style=color:#f92672>+</span> <span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> tens <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>                    packet[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> int(tens) <span style=color:#f92672>+</span> <span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>                packet[<span style=color:#ae81ff>9</span>] <span style=color:#f92672>=</span> int(ones) <span style=color:#f92672>+</span> <span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>                checksum <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> el <span style=color:#f92672>in</span> packet:
</span></span><span style=display:flex><span>                    checksum <span style=color:#f92672>^=</span> ord(chr(el))
</span></span><span style=display:flex><span>                packet<span style=color:#f92672>.</span>append(checksum)
</span></span><span style=display:flex><span>                cmd <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> el <span style=color:#f92672>in</span> packet:
</span></span><span style=display:flex><span>                    my <span style=color:#f92672>=</span> str<span style=color:#f92672>.</span>encode(chr(el))
</span></span><span style=display:flex><span>                    cmd <span style=color:#f92672>=</span> cmd <span style=color:#f92672>+</span> chr(el)
</span></span><span style=display:flex><span>                cmd <span style=color:#f92672>=</span> str<span style=color:#f92672>.</span>encode(cmd)
</span></span><span style=display:flex><span>                <span style=color:#75715e>#print(binascii.hexlify(cmd))</span>
</span></span><span style=display:flex><span>                print(<span style=color:#e6db74>&#39;Comand data:&#39;</span>,cmd)
</span></span><span style=display:flex><span>                sendDataTCP(cmd)
</span></span><span style=display:flex><span>                <span style=color:#75715e>#sendDataUART(cmd)</span>
</span></span><span style=display:flex><span>        sleep(<span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>global</span> number, error
</span></span><span style=display:flex><span>    number, error <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    makeCmd()</span></span></code></pre></div></div></div><div class=tab><div class=tab-label data-tab-id=bb05afdfacc444584ce7ab97bd12b36d><span class=tab-toggle>+</span>
<span class=tab-title>ecosystem.config.js</span>
<a href=/posts/led_p10/ecosystem.config.js download class=tab-download title=Download onclick=event.stopPropagation()><i data-feather=download stroke-width=1.75 width=20 height=20></i></a></div><div class=tab-content id=tab-bb05afdfacc444584ce7ab97bd12b36d><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>apps</span> <span style=color:#f92672>:</span> [{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;LED_P10_txt&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>script</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;led_p10.py&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>interpreter</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;python3&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>instances</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>autorestart</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>watch</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>max_memory_restart</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;1G&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>env</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>NODE_ENV</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;development&#39;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>env_production</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>NODE_ENV</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;production&#39;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }],
</span></span><span style=display:flex><span>};</span></span></code></pre></div></div></div></div></div></article></div></main><footer style="background:rgba(0,0,0,.3);padding:2rem 0;margin-top:4rem;text-align:center;border-top:1px solid rgba(255,255,255,.1)"><div class=container><p style=color:#888;margin:0>Copyright Â© 2025 â€¢
Made with â™¥ï¸ by <a href=https://github.com/xyzroe target=_blank style=color:#9d50bb;text-decoration:none>xyzroe</a></p></div></footer><script>feather.replace()</script></body></html>